<!-- navigation-bar 开始 -->
<link href="/${res}/css/navigation-bar.css" rel="stylesheet"/>
<div class="navigation-bar" id="navigationBar">
    <div class="bd clearfix">
        <div class="line" id="navLine"></div>
        [@cms_channel_list]
        [#if !channel??]
        <div class="item">
            <a href="${base}/" class="tt on">首页</a></div>
        [#list tag_list as c]
        [#if c_index<6]
        <div class="item">
            <a href="${c.url}" class="tt">${c.name}</a>
            [@cms_channel_list parentId=c.id]
            [#if tag_list?size>0]
            <div class="menu">
                <div class="arrow"></div>
                <ul>
                    [#list tag_list as c2]
                    <li><a href="${c2.url}" class="tt">${c2.name}</a></li>
                    [/#list]
                </ul>
            </div>
            [/#if]
            [/@cms_channel_list]
        </div>
        [/#if]
        [/#list]
        [#else]
        <div class="item"><a href="${base}/" class="tt">首页</a></div>
        [#list tag_list as c]
        [#if c_index<6]
        <div class="item">
            [#if channel.parentId??]
            <a href="${c.url}" class="tt[#if channel.parentId==c.id] on[/#if]">${c.name}</a>
            [#else]
            <a href="${c.url}" class="tt[#if channel.id==c.id] on[/#if]">${c.name}</a>
            [/#if]
            [@cms_channel_list parentId=c.id]
            [#if tag_list?size>0]
            <div class="menu">
                <div class="arrow"></div>
                <ul>
                    [#list tag_list as c2]
                    <li><a href="${c2.url}" class="tt">${c2.name}</a></li>
                    [/#list]
                </ul>
            </div>
            [/#if]
            [/@cms_channel_list]
        </div>
        [/#if]
        [/#list]
        [/#if]
        [/@cms_channel_list]
    </div>
</div>
<script>
  var cntLeft = $('.header .container').offset().left;

  function lineMore($target) {
    var ttOnLeft = $target.offset().left;
    $('#navLine').css({left: (ttOnLeft - cntLeft) + 'px'});
    console.log('ttOnLeft', ttOnLeft);
    console.log('$target', $target);
  }

  var $target = $('#navigationBar a.tt.on');
  lineMore($target);
  var mt = null
  $('#navigationBar a.tt').each(function (e) {
    $(this).hover(function () {
      $(this).next('.menu').addClass('visible')
      lineMore($(this));
    }, function () {
      var $this = $(this);
      mt = setTimeout(function () {
        $this.next('.menu').removeClass('visible')
        clearTimeout(mt);
      }, 50)
      $('#navLine').css({left: (0) + 'px'})
    })
  })
  $('#navigationBar .menu').each(function (e) {
    $(this).hover(function () {
      clearTimeout(mt);
      $(this).addClass('visible')
    }, function () {
      clearTimeout(mt);
      $(this).removeClass('visible')
    })
  })
</script>
<script>

</script>
<!-- navigation-bar 结束 -->